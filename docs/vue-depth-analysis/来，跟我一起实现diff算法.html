<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>技术文档</title>
    <meta name="generator" content="VuePress 1.8.0">
    
    <meta name="description" content="技术文档">
    
    <link rel="preload" href="/book-docs/vue-depth-analysis/assets/css/0.styles.8591e10b.css" as="style"><link rel="preload" href="/book-docs/vue-depth-analysis/assets/js/app.51ae15a7.js" as="script"><link rel="preload" href="/book-docs/vue-depth-analysis/assets/js/2.d669090a.js" as="script"><link rel="preload" href="/book-docs/vue-depth-analysis/assets/js/3.c431a2cd.js" as="script"><link rel="prefetch" href="/book-docs/vue-depth-analysis/assets/js/10.efbf1bb7.js"><link rel="prefetch" href="/book-docs/vue-depth-analysis/assets/js/11.a0855ea9.js"><link rel="prefetch" href="/book-docs/vue-depth-analysis/assets/js/12.04b8c6b2.js"><link rel="prefetch" href="/book-docs/vue-depth-analysis/assets/js/13.ff3a7173.js"><link rel="prefetch" href="/book-docs/vue-depth-analysis/assets/js/14.2b998cb4.js"><link rel="prefetch" href="/book-docs/vue-depth-analysis/assets/js/15.7cc6e804.js"><link rel="prefetch" href="/book-docs/vue-depth-analysis/assets/js/16.69094c9a.js"><link rel="prefetch" href="/book-docs/vue-depth-analysis/assets/js/17.9e8b0e3b.js"><link rel="prefetch" href="/book-docs/vue-depth-analysis/assets/js/18.d302e10a.js"><link rel="prefetch" href="/book-docs/vue-depth-analysis/assets/js/19.bb0ceb6c.js"><link rel="prefetch" href="/book-docs/vue-depth-analysis/assets/js/20.e08a7e67.js"><link rel="prefetch" href="/book-docs/vue-depth-analysis/assets/js/21.584bac77.js"><link rel="prefetch" href="/book-docs/vue-depth-analysis/assets/js/22.f5a9ebe3.js"><link rel="prefetch" href="/book-docs/vue-depth-analysis/assets/js/23.6412c5c7.js"><link rel="prefetch" href="/book-docs/vue-depth-analysis/assets/js/4.39dec256.js"><link rel="prefetch" href="/book-docs/vue-depth-analysis/assets/js/5.91555d41.js"><link rel="prefetch" href="/book-docs/vue-depth-analysis/assets/js/6.df985286.js"><link rel="prefetch" href="/book-docs/vue-depth-analysis/assets/js/7.84a5236c.js"><link rel="prefetch" href="/book-docs/vue-depth-analysis/assets/js/8.b732416c.js"><link rel="prefetch" href="/book-docs/vue-depth-analysis/assets/js/9.46e95ee8.js">
    <link rel="stylesheet" href="/book-docs/vue-depth-analysis/assets/css/0.styles.8591e10b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/book-docs/vue-depth-analysis/" class="home-link router-link-active"><!----> <span class="site-name">技术文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/book-docs/vue-depth-analysis/vue插槽，你想了解的都在这里.html" class="sidebar-link">vue插槽，你想了解的都在这里.md</a></li><li><a href="/book-docs/vue-depth-analysis/丰富的选项合并策略.html" class="sidebar-link">丰富的选项合并策略.md</a></li><li><a href="/book-docs/vue-depth-analysis/你真的了解v-model的语法糖了吗.html" class="sidebar-link">你真的了解v-model的语法糖了吗.md</a></li><li><a href="/book-docs/vue-depth-analysis/动态组件的深入分析.html" class="sidebar-link">动态组件的深入分析.md</a></li><li><a href="/book-docs/vue-depth-analysis/基础的数据代理检测.html" class="sidebar-link">基础的数据代理检测.md</a></li><li><a href="/book-docs/vue-depth-analysis/完整渲染流程.html" class="sidebar-link">完整渲染流程.md</a></li><li><a href="/book-docs/vue-depth-analysis/实例挂载流程和模板编译.html" class="sidebar-link">实例挂载流程和模板编译.md</a></li><li><a href="/book-docs/vue-depth-analysis/彻底搞懂Vue中keep-alive的魔法-上.html" class="sidebar-link">彻底搞懂Vue中keep-alive的魔法-上.md</a></li><li><a href="/book-docs/vue-depth-analysis/彻底搞懂Vue中keep-alive的魔法-下.html" class="sidebar-link">彻底搞懂Vue中keep-alive的魔法-下.md</a></li><li><a href="/book-docs/vue-depth-analysis/揭秘Vue的事件机制.html" class="sidebar-link">揭秘Vue的事件机制.md</a></li><li><a href="/book-docs/vue-depth-analysis/来，跟我一起实现diff算法.html" class="active sidebar-link">来，跟我一起实现diff算法.md</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/book-docs/vue-depth-analysis/来，跟我一起实现diff算法.html#_8-1-创建基础类" class="sidebar-link">8.1 创建基础类</a></li><li class="sidebar-sub-header"><a href="/book-docs/vue-depth-analysis/来，跟我一起实现diff算法.html#_8-2-创建vnode" class="sidebar-link">8.2 创建Vnode</a></li><li class="sidebar-sub-header"><a href="/book-docs/vue-depth-analysis/来，跟我一起实现diff算法.html#_8-3-模拟渲染过程" class="sidebar-link">8.3 模拟渲染过程</a></li><li class="sidebar-sub-header"><a href="/book-docs/vue-depth-analysis/来，跟我一起实现diff算法.html#_8-4-diff算法实现" class="sidebar-link">8.4 diff算法实现</a></li><li class="sidebar-sub-header"><a href="/book-docs/vue-depth-analysis/来，跟我一起实现diff算法.html#_8-5-diff算法优化" class="sidebar-link">8.5 diff算法优化</a></li><li class="sidebar-sub-header"><a href="/book-docs/vue-depth-analysis/来，跟我一起实现diff算法.html#_8-6-问题思考" class="sidebar-link">8.6 问题思考</a></li></ul></li><li><a href="/book-docs/vue-depth-analysis/深入响应式系统构建-上.html" class="sidebar-link">深入响应式系统构建-上.md</a></li><li><a href="/book-docs/vue-depth-analysis/深入响应式系统构建-下.html" class="sidebar-link">深入响应式系统构建-下.md</a></li><li><a href="/book-docs/vue-depth-analysis/深入响应式系统构建-中.html" class="sidebar-link">深入响应式系统构建-中.md</a></li><li><a href="/book-docs/vue-depth-analysis/组件基础剖析.html" class="sidebar-link">组件基础剖析.md</a></li><li><a href="/book-docs/vue-depth-analysis/组件高级用法.html" class="sidebar-link">组件高级用法.md</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><blockquote><p>这一节，依然是<strong>深入剖析Vue源码系列</strong>，上几节内容介绍了<code>Virtual DOM</code>是Vue在渲染机制上做的优化，而渲染的核心在于数据变化时，如何高效的更新节点，这就是diff算法。由于源码中关于<code>diff</code>算法部分流程复杂，直接剖析每个流程不易于理解，所以这一节我们换一个思路，参考源码来手动实现一个简易版的<code>diff</code>算法。</p></blockquote> <p>之前讲到<code>Vue</code>在渲染机制的优化上，引入了<code>Virtual DOM</code>的概念，利用<code>Virtual DOM</code>描述一个真实的<code>DOM</code>,本质上是在<code>JS</code>和真实<code>DOM</code>之间架起了一层缓冲层。当我们通过大量的<code>JS</code>运算,并将最终结果反应到浏览器进行渲染时，<code>Virtual DOM</code>可以将多个改动合并成一个批量的操作，从而减少 <code>dom</code> 重排的次数，进而缩短了生成渲染树和绘制节点所花的时间，达到渲染优化的目的。之前的章节，我们简单的介绍了<code>Vue</code>中<code>Vnode</code>的概念，以及创建<code>Vnode</code>到<code>渲染Vnode</code>再到真实<code>DOM</code>的过程。如果有忘记流程的，可以参考前面的章节分析。</p> <p>**从<code>render</code>函数到创建虚拟<code>DOM</code>,再到渲染真实节点，这一过程是完整的，也是容易理解的。然而引入虚拟<code>DOM</code>的核心不在这里，而在于当数据发生变化时，如何最优化数据变动到视图更新的过程。这一个过程才是<code>Vnode</code>更新视图的核心，也就是常说的<code>diff</code>算法。**下面跟着我来实现一个简易版的<code>diff</code>算法</p> <h2 id="_8-1-创建基础类"><a href="#_8-1-创建基础类" class="header-anchor">#</a> 8.1 创建基础类</h2> <p>代码编写过程会遇到很多基本类型的判断，第一步需要先将这些方法封装。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Util</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token comment">// 检测基础类型</span>
  <span class="token function">_isPrimitive</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">'string'</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">'number'</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">'symbol'</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">'boolean'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 判断值不为空</span>
  <span class="token function">_isDef</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> v <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> v <span class="token operator">!==</span> <span class="token keyword">null</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 工具类的使用</span>
<span class="token keyword">const</span> util <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Util</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_8-2-创建vnode"><a href="#_8-2-创建vnode" class="header-anchor">#</a> 8.2 创建Vnode</h2> <p><code>Vnode</code>这个类在之前章节已经分析过源码，本质上是用一个对象去描述一个真实的<code>DOM</code>元素，简易版关注点在于元素的<code>tag</code>标签，元素的属性集合<code>data</code>,元素的子节点<code>children</code>,<code>text</code>为元素的文本节点,简单的描述类如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">VNode</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">tag<span class="token punctuation">,</span> data<span class="token punctuation">,</span> children</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>tag <span class="token operator">=</span> tag<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>children <span class="token operator">=</span> children<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>elm <span class="token operator">=</span> <span class="token string">''</span>
    <span class="token comment">// text属性用于标志Vnode节点没有其他子节点，只有纯文本</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>text <span class="token operator">=</span> util<span class="token punctuation">.</span><span class="token function">_isPrimitive</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>children <span class="token operator">:</span> <span class="token string">''</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_8-3-模拟渲染过程"><a href="#_8-3-模拟渲染过程" class="header-anchor">#</a> 8.3 模拟渲染过程</h2> <p>接下来需要创建另一个类模拟将<code>render</code>函数转换为<code>Vnode</code>,并将<code>Vnode</code>渲染为真实<code>DOM</code>的过程，我们将这个类定义为<code>Vn</code>,<code>Vn</code>具有两个基本的方法<code>createVnode, createElement</code>, 分别实现创建虚拟<code>Vnode</code>,和创建真实<code>DOM</code>的过程。</p> <h3 id="_8-3-1-createvnode"><a href="#_8-3-1-createvnode" class="header-anchor">#</a> 8.3.1 createVnode</h3> <p><code>createVnode</code>模拟<code>Vue</code>中<code>render</code>函数的实现思路，目的是将数据转换为虚拟的<code>Vnode</code>,先看具体的使用和定义。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.html</span>

<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;diff.js&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>

<span class="token comment">// 创建Vnode</span>

<span class="token keyword">let</span> <span class="token function-variable function">createVnode</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> _c <span class="token operator">=</span> vn<span class="token punctuation">.</span>createVnode<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">_c</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> attrs<span class="token operator">:</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'test'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">a</span> <span class="token operator">=&gt;</span> <span class="token function">_c</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>tag<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 元素内容结构</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> 
  <span class="token punctuation">[</span><span class="token punctuation">{</span>
    tag<span class="token operator">:</span> <span class="token string">'i'</span><span class="token punctuation">,</span>
    text<span class="token operator">:</span> <span class="token number">2</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    tag<span class="token operator">:</span> <span class="token string">'span'</span><span class="token punctuation">,</span>
    text<span class="token operator">:</span> <span class="token number">3</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    tag<span class="token operator">:</span> <span class="token string">'strong'</span><span class="token punctuation">,</span>
    text<span class="token operator">:</span> <span class="token number">4</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>



<span class="token comment">// diff.js</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">global</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">class</span> <span class="token class-name">Vn</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token comment">// 创建虚拟Vnode</span>
    <span class="token function">createVnode</span><span class="token punctuation">(</span><span class="token parameter">tag<span class="token punctuation">,</span> data<span class="token punctuation">,</span> children</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">VNode</span><span class="token punctuation">(</span>tag<span class="token punctuation">,</span> data<span class="token punctuation">,</span> children<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  global<span class="token punctuation">.</span>vn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p>这是一个完整的<code>Vnode</code>对象，我们已经可以用这个对象来简单的描述一个<code>DOM</code>节点，而<code>createElement</code>就是将这个对象对应到真实节点的过程。最终我们希望的结果是这样的。</p> <p><strong>Vnode对象</strong></p> <p><img src="data:image/png;base64,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" alt=""></p> <p><strong>渲染结果</strong></p> <p><img src="data:image/png;base64,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" alt=""></p> <h3 id="_8-3-2-createelement"><a href="#_8-3-2-createelement" class="header-anchor">#</a> 8.3.2 createElement</h3> <p>渲染真实<code>DOM</code>的过程就是遍历<code>Vnode</code>对象，递归创建真实节点的过程，这个不是本文的重点，所以我们可以粗糙的实现。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Vn</span> <span class="token punctuation">{</span>
  <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token parameter">vnode<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> el <span class="token operator">=</span> options<span class="token punctuation">.</span>el<span class="token punctuation">;</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>el <span class="token operator">||</span> <span class="token operator">!</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'无法找到根节点'</span><span class="token punctuation">)</span>
      <span class="token keyword">let</span> <span class="token function-variable function">_createElement</span> <span class="token operator">=</span> <span class="token parameter">vnode</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> tag<span class="token punctuation">,</span> data<span class="token punctuation">,</span> children <span class="token punctuation">}</span> <span class="token operator">=</span> vnode<span class="token punctuation">;</span>
        <span class="token keyword">const</span> ele <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 添加属性</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setAttr</span><span class="token punctuation">(</span>ele<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 简单的文本节点，只要创建文本节点即可</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>util<span class="token punctuation">.</span><span class="token function">_isPrimitive</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> testEle <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>
          ele<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>testEle<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// 复杂的子节点需要遍历子节点递归创建节点。</span>
          children<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">c</span> <span class="token operator">=&gt;</span> ele<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token function">_createElement</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> ele
      <span class="token punctuation">}</span>
      document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token function">_createElement</span><span class="token punctuation">(</span>vnode<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="_8-3-3-setattr"><a href="#_8-3-3-setattr" class="header-anchor">#</a> 8.3.3 setAttr</h3> <p><code>setAttr</code>是为节点设置属性的方法，利用<code>DOM</code>原生的<code>setAttribute</code>为每个节点设置属性值。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Vn</span> <span class="token punctuation">{</span>
  <span class="token function">setAttr</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>el<span class="token punctuation">)</span> <span class="token keyword">return</span>
    <span class="token keyword">const</span> attrs <span class="token operator">=</span> data<span class="token punctuation">.</span>attrs<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>attrs<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>attrs<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">a</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      el<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> attrs<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>至此一个简单的 **数据 -&gt; <code>Virtual DOM</code> =&gt; 真实<code>DOM</code>**的模型搭建成功,这也是数据变化、比较、更新的基础。</p> <h2 id="_8-4-diff算法实现"><a href="#_8-4-diff算法实现" class="header-anchor">#</a> 8.4 diff算法实现</h2> <p>更新组件的过程首先是响应式数据发生了变化,数据频繁的修改如果直接渲染到真实<code>DOM</code>上会引起整个<code>DOM</code>树的重绘和重排，频繁的重绘和重排是极其消耗性能的。如何优化这一渲染过程，<code>Vue</code>源码中给出了两个具体的思路，其中一个是在介绍响应式系统时提到的将多次修改推到一个队列中，在下一个<code>tick</code>去执行视图更新，另一个就是接下来要着重介绍的<code>diff</code>算法，将需要修改的数据进行比较，并只渲染必要的<code>DOM</code>。</p> <p>数据的改变最终会导致节点的改变，所以<code>diff</code>算法的核心在于在尽可能小变动的前提下找到需要更新的节点，直接调用原生相关<code>DOM</code>方法修改视图。不管是真实<code>DOM</code>还是前面创建的<code>Virtual DOM</code>,都可以理解为一颗<code>DOM</code>树，<strong>算法比较节点不同时，只会进行同层节点的比较，不会跨层进行比较，这也大大减少了算法复杂度。</strong></p> <h3 id="_8-4-1-diffvnode"><a href="#_8-4-1-diffvnode" class="header-anchor">#</a> 8.4.1 diffVnode</h3> <p>在之前的基础上，我们实现一个思路，1秒之后数据发生改变。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.html</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    tag<span class="token operator">:</span> <span class="token string">'span'</span><span class="token punctuation">,</span>
    text<span class="token operator">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    tag<span class="token operator">:</span> <span class="token string">'strong'</span><span class="token punctuation">,</span>
    text<span class="token operator">:</span> <span class="token number">2</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    tag<span class="token operator">:</span> <span class="token string">'i'</span><span class="token punctuation">,</span>
    text<span class="token operator">:</span> <span class="token number">3</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    tag<span class="token operator">:</span> <span class="token string">'i'</span><span class="token punctuation">,</span>
    text<span class="token operator">:</span> <span class="token number">4</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token comment">// newVnode 表示改变后新的Vnode树</span>
  <span class="token keyword">const</span> newVnode <span class="token operator">=</span> <span class="token function">createVnode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// diffVnode会比较新旧Vnode树，并完成视图更新</span>
  vn<span class="token punctuation">.</span><span class="token function">diffVnode</span><span class="token punctuation">(</span>newVnode<span class="token punctuation">,</span> preVnode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p><code>diffVnode</code>的逻辑，会对比新旧节点的不同，并完成视图渲染更新</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Vn</span> <span class="token punctuation">{</span>
  ···
  <span class="token function">diffVnode</span><span class="token punctuation">(</span><span class="token parameter">nVnode<span class="token punctuation">,</span> oVnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_sameVnode</span><span class="token punctuation">(</span>nVnode<span class="token punctuation">,</span> oVnode<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 直接更新根节点及所有子节点</span>
      <span class="token keyword">return</span> <span class="token operator">**</span><span class="token operator">*</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">generateElm</span><span class="token punctuation">(</span>vonde<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">patchVnode</span><span class="token punctuation">(</span>nVnode<span class="token punctuation">,</span> oVnode<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_8-4-2-samevnode"><a href="#_8-4-2-samevnode" class="header-anchor">#</a> 8.4.2 _sameVnode</h3> <p>新旧节点的对比是算法的第一步，如果新旧节点的根节点不是同一个节点，则直接替换节点。这遵从上面提到的原则，<strong>只进行同层节点的比较，节点不一致，直接用新节点及其子节点替换旧节点</strong>。为了理解方便，我们假定节点相同的判断是<code>tag</code>标签是否一致(实际源码要复杂)。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Vn</span> <span class="token punctuation">{</span>
  <span class="token function">_sameVnode</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> n<span class="token punctuation">.</span>tag <span class="token operator">===</span> o<span class="token punctuation">.</span>tag<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_8-4-3-generateelm"><a href="#_8-4-3-generateelm" class="header-anchor">#</a> 8.4.3 generateElm</h3> <p><code>generateElm</code>的作用是跟踪每个节点实际的真实节点，方便在对比虚拟节点后实时更新真实<code>DOM</code>节点。虽然<code>Vue</code>源码中做法不同，但是这不是分析<code>diff</code>的重点。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Vn</span> <span class="token punctuation">{</span>
  <span class="token function">generateElm</span><span class="token punctuation">(</span><span class="token parameter">vnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">traverseTree</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">v<span class="token punctuation">,</span> parentEl</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> children <span class="token operator">=</span> v<span class="token punctuation">.</span>children<span class="token punctuation">;</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">c<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          c<span class="token punctuation">.</span>elm <span class="token operator">=</span> parentEl<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
          <span class="token function">traverseTree</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> c<span class="token punctuation">.</span>elm<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">traverseTree</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>执行<code>generateElm</code>方法后，我们可以在旧节点的<code>Vnode</code>中跟踪到每个<code>Virtual DOM</code>的真实节点信息。</p> <h3 id="_8-4-4-patchvnode"><a href="#_8-4-4-patchvnode" class="header-anchor">#</a> 8.4.4 patchVnode</h3> <p><code>patchVnode</code>是新旧<code>Vnode</code>对比的核心方法，对比的逻辑如下。</p> <ol><li>节点相同，且节点除了拥有文本节点外没有其他子节点。这种情况下直接替换文本内容。</li> <li>新节点没有子节点，旧节点有子节点，则删除旧节点所有子节点。</li> <li>旧节点没有子节点，新节点有子节点，则用新的所有子节点去更新旧节点。</li> <li>新旧都存在子节点。则对比子节点内容做操作。</li></ol> <p>代码逻辑如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Vn</span> <span class="token punctuation">{</span>
  <span class="token function">patchVnode</span><span class="token punctuation">(</span><span class="token parameter">nVnode<span class="token punctuation">,</span> oVnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">if</span><span class="token punctuation">(</span>nVnode<span class="token punctuation">.</span>text <span class="token operator">&amp;&amp;</span> nVnode<span class="token punctuation">.</span>text <span class="token operator">!==</span> oVnode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 当前真实dom元素</span>
      <span class="token keyword">let</span> ele <span class="token operator">=</span> oVnode<span class="token punctuation">.</span>elm
      <span class="token comment">// 子节点为文本节点</span>
      ele<span class="token punctuation">.</span>textContent <span class="token operator">=</span> nVnode<span class="token punctuation">.</span>text<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> oldCh <span class="token operator">=</span> oVnode<span class="token punctuation">.</span>children<span class="token punctuation">;</span>
      <span class="token keyword">const</span> newCh <span class="token operator">=</span> nVnode<span class="token punctuation">.</span>children<span class="token punctuation">;</span>
      <span class="token comment">// 新旧节点都存在。对比子节点</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>util<span class="token punctuation">.</span><span class="token function">_isDef</span><span class="token punctuation">(</span>oldCh<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> util<span class="token punctuation">.</span><span class="token function">_isDef</span><span class="token punctuation">(</span>newCh<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateChildren</span><span class="token punctuation">(</span>ele<span class="token punctuation">,</span> newCh<span class="token punctuation">,</span> oldCh<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>util<span class="token punctuation">.</span><span class="token function">_isDef</span><span class="token punctuation">(</span>oldCh<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 新节点没有子节点</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// 老节点没有子节点</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>上述例子在<code>patchVnode</code>过程中，新旧子节点都存在，所以会走<code>updateChildren</code>分支。</p> <h3 id="_8-4-5-updatechildren"><a href="#_8-4-5-updatechildren" class="header-anchor">#</a> 8.4.5 updateChildren</h3> <p>子节点的对比，我们通过文字和画图的形式分析，通过图解的形式可以很清晰看到<code>diff</code>算法的巧妙之处。</p> <p>大致逻辑是：</p> <ol><li>旧节点的起始位置为<code>oldStartIndex</code>,截至位置为<code>oldEndIndex</code>,新节点的起始位置为<code>newStartIndex</code>,截至位置为<code>newEndIndex</code>。</li> <li>新旧<code>children</code>的起始位置的元素两两对比，顺序是<code>newStartVnode, oldStartVnode</code>; <code>newEndVnode, oldEndVnode</code>;<code>newEndVnode, oldStartVnode</code>;<code>newStartIndex, oldEndIndex</code></li> <li><code>newStartVnode, oldStartVnode</code>节点相同，执行一次<code>patchVnode</code>过程，也就是递归对比相应子节点，并替换节点的过程。<code>oldStartIndex，newStartIndex</code>都像右移动一位。</li> <li><code>newEndVnode, oldEndVnode</code>节点相同，执行一次<code>patchVnode</code>过程，递归对比相应子节点，并替换节点。<code>oldEndIndex， newEndIndex</code>都像左移动一位。</li> <li><code>newEndVnode, oldStartVnode</code>节点相同，执行一次<code>patchVnode</code>过程，并将旧的<code>oldStartVnode</code>移动到尾部,<code>oldStartIndex</code>右移一味，<code>newEndIndex</code>左移一位。</li> <li><code>newStartIndex, oldEndIndex</code>节点相同，执行一次<code>patchVnode</code>过程，并将旧的<code>oldEndVnode</code>移动到头部,<code>oldEndIndex</code>左移一味，<code>newStartIndex</code>右移一位。</li> <li>四种组合都不相同，则会搜索旧节点所有子节点，找到将这个旧节点和<code>newStartVnode</code>执行<code>patchVnode</code>过程。</li> <li>不断对比的过程使得<code>oldStartIndex</code>不断逼近<code>oldEndIndex</code>，<code>newStartIndex</code>不断逼近<code>newEndIndex</code>。当<code>oldEndIndex &lt;= oldStartIndex</code>说明旧节点已经遍历完了，此时只要批量增加新节点即可。当<code>newEndIndex &lt;= newStartIndex</code>说明旧节点还有剩下，此时只要批量删除旧节点即可。</li></ol> <p>结合前面的例子：</p> <p>第一步：</p> <p><img src="data:image/png;base64,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" alt=""></p> <p>第二步：</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAjIAAAEUCAMAAAAGDyzdAAACWFBMVEUtLS0uLi4uQEAwTk4wWFgwWloxY2MyMjIybGwzdXU0hYU0jIw1lJQ2mpo2oaE3Nzc3rq43r683sLA4tbU4u7s5wcE5x8c6Ojo9ystBQUFCQkJCzs9DQ0NERERFRUVGQDlGRkZGqKhHR0dK0tJNTU1PT09RUVFS1dVTU1NT1dVUVFRWVlZXV1dZTkJZWVlaWlpbW1tc2NldXV1d2NlgYGBhYWFmZmZoWUpoaGho3NxpaWlp3d1qamptbW1ubm5vb29yYGBycnJ0dHR1Y1B24OB3d3d4Y2N7MzN7e3t9fX1+NDR/NDR/NTWBgYGC4+SDg4OD4uOIiIiJiYmMjIyNdFuPj4+Q5uaR5uaTk5OUlJSbm5ucZmacnJyfaWmf6uqg6uqjbW2jo6OkpKSlpaWqqqqri2qtra2urq6vr6+v7e6wsLCzs7O1tbW5ubm9vb298fG+8fG/v7/AwMDCwsLHoHjIqKjKysrLy8vNvr7N9PTO9PTQ0NDU1NTX19fYycnZrYDb29vd3d3e9/fe+Pnf9/ff+Pjg+Pjh4eHi4uLk1dXk5OTm5ubn5+fo6Ojp6enquojt7e3u/Pzv7+/v/Pzw8PDw/Pzx8fHywIzy8vLz8/P09PT19fX29vb39/f49fX4+Pj5+fn6xpD6yZb6+vr6/Pz7zp770aT71Kr71Kz72LL7+/v7/Pz7/f3827j83Ln838D84sb848b8/Pz8/v795c396tT96tX97dv9/f39/v79///+8OL+8OP+9Or+9/D++PD++PH+/v7+/////Pf//Pj//v7///7////041P2AAAdCElEQVR42u2dj38cxXmH93TF9fngqgbpUKuW1nJbV4nxlVBoXbmJlehsGjv2qWWBOmA7qHRxW7ArAhtJTcIBxnKaiui0KJjqcGTX2JjiyA4QO2BiO27m3+rM7J50u7e383Ol3dM7H5C8e/ve9953nn3fud3RrIGmka85Iptguw5tDQgD2AIyYAvIgG2ikHGmHfkGtuvQFrIM2EJhAltABmwBGbAFZMAWkIEQgi0gA7aADNgCMmALyIAtIAMhBFtABmwBGbAFZMAWJj+ALUx+AFsoTBBCsAVkwBaQAVtABmwBGbAFZCCEYAvIgO2aIPOXGWj62u+fXgfIQDdrbf+xLpCBJK/NdhsgA8gAMoAMIAPIADJCyEwHmiOy6bZMRt5WRbcjbf8s80LCPzNkGcgyUJgAGUAGkAFkABlAJuVdZ5fr9N+1nVXHMnAz/baWiWol22+L9wEySUOmXraXe8eplQzDamc75nV5wxZ3vTwyvvcCZFKLzEnSY89XUXV71W9LdwAygEwLMuNeR2pGhlQhy0WmXjaMgyvIWKZFXnKQbRilgy4ydvmf3Zrl7cMgk2OqAza2NjV03cu2bf+J8U/45/cAGSFXSBHaVnOR8XpnfIBCgLcM3KUm/WmZpvEM3YGRqZdfLBvkIK/rKQ6lGjLLdcceqIbrWviAkyWLIEP73BzwxjI2tsa78SaxrQ54yBjfpHws79tmuftLNQqactf98fLdbBuQEXGlhjsRjZVqBJlG7zimYS8nFdueJsdYZFcjy9TL+EjT7XoHdz3FwSLbFi1qYbq02DiYF/xfdWfNV5gsmnhsx7RWCpNdwjUD72jss4brdLtepoyqd93fZzIEWCNzHxQmIVdop82UbYJMo3ccDAjJFcuFCb9Aj1tBBh+J+510PSlMFAeyYZeeNNvo0vrl4BzhUuNHxqSVcYYWxwYy5VcIIvXGPpqQSKWqDlhauu57GYOkGCPzKCAjhgzp4pky6Zrl3nHowMP2sozbU/S4FWRcREjXu8iQgwhlJq5x7CyDwaFv1oIMgcEMIOPto1mGNPPAdi1ZBlcmgyLzAiAjm2WWe4e+ijMLIQT33jTtsVBkcNc7eGetUY2qO4fbZRlvLENYqJNKR4pbABmHHGIbPmRQY1/1fqxxsEo+sJ6xDK5MBiHmPvjGJDOWcSlo9M645SaFBjJkfBOKDDGe8cY1qHqQHNx2LON+Y7Ldb0zVAcN4vnEpDzPgIUOH2s/4kWnsQ1MDxNzG/9dKOr4xNSrTox2/8kMmo3dFgpPbDGN4xpkZHnecUfzPg6OOM4Y7cswh28Mz43jf3406Y6OOt2NseIYePPXISWfqfsN47pEp1xLvxm80dv9UWlZg+EPMjJH5145f+QHuMWmzxZWJ1CUoTIAMry2tTI8CMoAMv+195PsSIAPI8Ns+msn8DtxjAmQEbF/IZB4GZAAZEdvfzhwEZAAZEdtHM28DMoCMiO0LX0EdjUxgcx66Xd32hc5GJroBMtK29U5F5rOlpfcvXjy/uHj+4sX3l5Y+WzVknI7ruquRJ19nIHPjo4uLLe3iRzficeWqQjpT0Q20c7HpInS8UnlocLC/WOwfHHyoUjneYcjcWTq72KadXboTS9dFRTSuEEZpatWdfGKw2NIGn5jsGGQ+v7wY1c5e/lyzK6yIxhFClqY+3blKX7FN66vMJRAZsZvjC7fQzWhgaLt8E91a0HBTfuEaO6LXFvROBohDs43uaVxvXx8qRrW+oddxWf5Riic/IPTJ2UWOdvYT5nduPl2eiKLT+s6607yaes7YN6KlaBt6A11LcWG6c3mRs12+w3CUR5czorf0hfAWr6aW8B/uK3K0vsMorcj8Bt04v8jd3ruBVF2JJaKMby4imirhx+lsbqjI2Ybm0pplPlkUap+oFYiYIhqpK6apUhCvo8n+InfbMolupxEZQWIIM7+RdSW+iLbXvS2qeV0+/LfR4aJQO9zkYUqQwVXprCgyZ280MyPiSowRbaurpCmoK6xF1H6ZtiwjTgxlRsqVOCPaTldNU0wX57M+UbG+lUyaEmRuShCDmbkp40qsEW2jq6gpqCuuRdVShcyd9xal2nt3pC6gxxjRdrpqmmK6JyS0sNqJVCGztCjZliRciTWibXQVNYV039pSlGpb3koRMjdliWkqTdyuxBvRcF1VTSHdSlGyVVKEzGVpZBYvC7sSb0TDdVU1RXRPyGo1kloakPlsUaHdEHQl5oiG6ipriugOSYsVh1KDzEUVZC4KuhJzREN1lTUFdI8XFdpkKiY/LKglmcXFz9AC9035M6oRPSN+Qz9+zRXd+VtoUEVsEN2aT8Pkh8tqyFwWol8xolJnjromv64SnsXi8XQUpuireD/5uvGdyAPOi7gSe0RDdDVo8od/SE1sKBXI3FhUQ8YbAPO5EntEQ3Q1aPKHP/r6T+8GoxB5QD++4Jx8ZJYWFduSgCt9at3HjmiIrgZN7vBPFtWQIQPg5CPDulfwGCvLvMfvymRRsU2KhyFEM8/quNavMZy6FVUHKylA5s6iKjKLd+K/pMYd0VbdEM2cEDIilxBZV5mZyltSgMwv1JH5BbcrW8JStdHV3d214R7D2NBbLBhks9iTzRa6yLZwRFt1mzV7soaRvRdLGtkvZLN3G3kqmO1pEswbxiZ/+djCH/65oioyxTn0dtKRWVJHZon348yFxdBFJtuF/5GjPYi7sCfbhTsX96hwRFvm4M4F+FxBBkvk80ZA0N3h79g57vAfVUfmKHoHkFl59Wi7GHZ34dRSIKc76deubpwNCvilnHhEA7r/7dMkb90QpRKYoTz90RCkO+iGT5M3/BV1ZCroTNKR+Zk6Mj/j/TghES3Q5IILUy/+ke3p7qJZB9eJHnzC58QjGtA949fMu6nLRYbWI8JQniDjCtIdwe81lTVG5u2EIXNRHZmLCsjQ0pQntOAe23BvdkOvm2XiQYaWpsIKMk1ZpoEM3oG5lURmRB2ZEb+Db//LzszLaUOG884kz8cZCR39UmToCILUB0aWGRFFZiQw+nWRocPfnmJxZSzjCeZCxjIj3OEfVEdmEF1q4uWrZAX7pCFzXh2Z87wfZzAcGVqYNtGSgbtwY2SWaY4oRxgu+TR7vDE1JtRDhhZGXBSXBckHuscb8vhvM2lBhuee1iUfL3g98qQhs6ihySPjNTqWEYuoDDKcLe+OwyWQ6VdHpp/+5fIPv/1Flxfy0IPVRWY60JzApi5kWt45RPdS+4jyI4MjGulRoF0T7cWCWyEDmpdCQtcqhlBRQ8OPdnnyTxu80Oc3GRlf+wtGnLk3Q20TVpiK6sgUERI5c4R7sdAykmlo8pyxepD54bf/PAqZzHoa/uqJaKzItNdc5cL0cLvClHhk8NwH44E3NSGjLaLcYbimR3NNhr/PfSV0+Lv2yDAu5T2LL8o89vWf6LmUpzOiMQ5/wyfmySBDvn/5h9ItBwQrsu9LtktN0pDhmC7zg796U88NA1b35QyDNaaJAZlcZKcKIRO88JTHo6JclEuFFoeDl/Ke+5s0IvOdBzQhw7g4WiA3ffJCF0fFLuW1GXqzkOG/lBd2ebv7rqa3793ou+LTu3FjEBnmDYO1R4Y5+WHxzQee1TT5gWO6TC6ndteOccMgVJGFjNo9poLv7d27WstZKJfnQAYlDBnmFKsf/NFjuqZYsZHpuat7lZEpbLhHHzIht+p7svlgVluGBiegFmSYkx/WHhnWRM5nmXcl+SdyHmWOZVi9pzb5IZzRAkuUf/LDbEjZa02bBY+Z3g2FYgsys6wpVglAZklpHCM0XXyWnWWyjLHMrOgUK4ZmLl9kIjMrP5FzZZZxvnGJcCXLkCIcRIY9kTMByNyIvizzLOdfZUtO5Iyu/LoncrbeTiKTRxnICEzkDJbB1rduGsu499WNlokWyUcm8k/fyJU83L6j6U/f2IOZQvS3bD3TxQNzL0JnjMpNF58IvH3wjQPfmFqzzEQqkFnFP7CdiMRlUw+zME2Ih2FCMbERTf7w94UQWWCkObE/fUsCMp+qIfOpyE35vuiBDON8j+dP3xjICP3p2yr8gW3cyLBXBsCLFSguFhK6WEGo7jn1iJ4TXc1gFTRXdBfQMTWxY4j5yI1MJgGPvbixeksSKUdU4szRoClwxsa9tEUiCtOqLnzW6YuFsIdOzGFTKpD51VlZYs7+ShCZuCMapquuKaIb98JnyUBmNRdx7fSFz9Br0itN9L2WImRWcanomCMaqqusKaQb8yKuCUFGsjSdvYOEken4RVzRnOwiw3OpQmYVH3sRb0TDdVU1xXTlklrfLEoVMqv5cJ1YI9pGV1FTUHdC5oEJnOPs5GQZhD4WReZj9H8yWSbeiLb9pqakKaZ7W0INa91OHTKizHws1XVxR7Ttw3WUNAV1b6NDomKH0M/Tl2VwbRL43vSeryohwUd4xRfR9o/wUtEU1RVWO8T/oMAkZRmEfs3/0ONfo6uyWSbWiEY8KFBBU1j3OpoQGHFvmRB4HGmykMHFie/R6qQoqTxaPb6IRj2OVFBT4XGk5Om3s/yPy50V6fZkIbOAH830IZuYD2+qdF28EY3UFdM8rRr+Q3wP5T6EUJKQEbw5fhpXm88/jMw0Zz/8HKGrpxUfxzD/U5GI/nRex2MgYtMM1124hU7sYGvtOIGuLYgoJWLyQ3DzzpW20Jy9ckfD2d54TBJfRG8hXVkGcfeinjMWoVd3RDLat+NVfNCPUHoLU9PF4I8utPJy4aMbmrpOKKKn9SFzmldTFzK4GO5vK9e3f1ai25OKDGmfXrny/oULeP2Z8xcuvH/lyqdIX9cJRVT7atscmlp1Jx7f2qq09fEJuW5PMjKMpm09WlZE41ignaWpWRdPDdy//8GtW/HKJf1btz64f/8x+W5PNDLzkZsalzCOjmhca/pHaWrWvRp58nUQMqtme1Uhnamh6mvnVkv3DCCj2XY+FV23VraADNgCMmC79sjY5Tr5Vf1SlW6VaqFv9ZQJyKxvZKrbqwFk6sMW+WWaCJABZLiQQWPkd61kAzKADGm1nXbJMGzChGFYyMYLBpRnkEn/XX4Rb9TRFKaI1iXLtPB+/Fb4l0FSDz669A8YmXrZMExAZr0gU8Is/NtAFY3VkI1/kSwzU8agvFizMQbVARtvWm5dsghHA1PIwia1kuUe/wcmJob8bwEy6wUZnGFecfu7ttNFZmpnbXnAa1rIwRWKvIQsTFK9PO7WKLzTtNzCRA+0zGZk9N8cB9s1tl2e/HDykSlsOzrmjJJFbMadqS9NOePDM+Ql+gu/Qo6h/x4bdZyZ4XFq4oxve2V4HP9+atQZpwvguEYqkx/gbE/JWKZKsoxt02Jj0ywz7n6fpsNfkmXwD5pQLDpsWc4yNZqbvmmufP+GwrQ+ChMG46lSjQ5vDdsby2A28FhmGRl7OxkBN5DxxjI2/U0GPGRcgywbkFkvWeb5AeOLZNBiGAdJ+jDxNybyDchqyjKUqxVk6DcmQgi2Kf+j2fi2Bciso8IENwzAFpABW0AGbJN6wwCQAVtABmwBGbAFZKDrABlABpABZAAZQAZsk4XMdKA5Ipudb/vdb33jG9/6bro+cyYTqy5kmcjN7+976d13X9p3CrIMFCbOg59+ifx86QggowsZlT9iVNE9s1rh3/su+fnu3tXu9ksdi0x0iw8ZtFpdt8+PzExsuu9EOtg5yByvVB4aHCQrIwwOPlSpHI8PmWi5eJAhcrvdwrQ7xDukebGQqHB2BjKTT4Q892rwicmYkImU049MQ27zHjL83bM5xDu9utHh7ABk5irtV3mqzGlHhiV3TV/XLQTkNu/as2fX5jDvNCLDDOeP047M69ErnfYNva4VGV45TQVCQE4PMsL+pW7d3zc4lsYdekMbMvxyWpARktOBjIR/aVtd/DDfuriHkdrq4o64nA5kxOQ0ICPjX7qQmeNffXuOMcTg0RWS0zCmEJRTDr+cfylC5jaa7BdY438y+qkQTF1pOdknpQjLqYVfPpypQeY2Oiz2JJHDfmYEkZGXk3wek7icyhLVpxXCmRZkhF0kTv5SFpl5BTkZZKTk/lch/NcVwpmOx17Mf4AmxZ+KNok+mJdazUC/XKRujHLhurEKJuaxF5Myz16clL4+oiAnk2WUvRPVVRFMSWE6IfeE1xOSyKjISYRB3TtBXSXBdCDzluxzpN+SQkZJTjwMGrwT01UTTAcyGp5WL4KMkpx4GDR4J6arJpgKZE7IutiUvAWQUZMTDoMO74TCryiYCmSGpH0sDkkgoyYnfKNCh3dC4VcUTAMyx4sKbVIYGUW5M4Jh0OKdSPhVBdOAzKCKj4PCyCjK3RIJw7wm70TCryo4n3xklM6KYvG4IDJ65DjDsKBPjjf8yoILyUdmSM3HIUFk9MhxhuGcPjne8CsLnks+Mn1qPva799O4kdEjxxkGjXK84Y8WzBl5luD1xCMzWVRsk0JZJkSuJ7uhV2pEyoGMPjnO8DPCyUQm6F8SkamoIlMRQiZErrtLpA8rQsjok+MMv6ZwJhqZ1ovbvRsMo6sbR/Yew8DRLRhkE5+c2UKXERLtLULI+OTy+K3z5P2NPJbbZBToHqzhiufoaWncncXyATleZNrJ5Y1NG7I9xFNy2i/L9WSN7N0+J7cIhp9xryDPzDJb1hgZ1s3x02guLHm6yGS7DBJHGuNsT0+2K+sGONjm0Nuckx8Ccm7vNZDBcoUcfQzDhl5PvFB0dzQjEyoXrhshlzd+y8h+IUvfPV9syPVkPX1euYBuaDgFkWEJrv3kh6NhyBRo/sYdVcCs0LzT1Y3DSXow13r8UYEsc9Tfh7nlSkHlqAb5QbZwCsjTHfSlgBznmdNWLu/mT+wd+dGQozvyfmSOCp2xR9WROZr0whRSews0uXgdSeJJz3NcmEg4c3w309rpVvwDUZK+GkqeHEWWbuVo7unBh/mQqQiEoa0c7bq8W4uIi64c3VHwI1MRCn9FHZlKCpGhpcntLXzG3Yu/YLhZRjsylE5ShRrINGWZBjJ4R8HQg0yzHO26pizTQAbvyAEy0e8xEjr6pci4hd6t71HIjAggMxIcjtI+dIe/vcXiyljG7UP3s/iRGREIQ1s52nU9K2OZZUJbxjIjQuEfUUdmJOnIDIYjQwvTJsNN38bGyCwzKIDMYLAP3UrUQIbuyhWX+5D0alchSwdUIfd9InVPHdm7d/fmNnJu11FXC01yJA3d4/Nx8+59e4+c4g7/oDoyg+lDRvjyhTQynC1QKTiRObWvaVkHgYYhbepVd3EIsjaaHmTEboUmE5l+dWT6BZDpF4wfLSb0G5xfjh2GI+7iMbtE1Nw62JzTdi2vjcYX/n51ZPqTjkxRHZmiADJFCWR8IxlPjh0Gb4mqPcLI+Nze477LPt7wFzU0hB5ual9+2Ne+nGBkhHyMDZl2cvEg09rWBplMVPu9xBYmwUwaU2FiJm6tham1rU1hermp/fvLL/s3a4kd/gqO12Ic/kYOD7UPf/0tecNf7tmPa4dM78buVUQm1zp0kUSGfMnet3szc6jk+wIfwszuvTq/ZOPhEmuImHhkWNeeAjd42l57krmUF3KvglwHYnSi9KW8EOfuxpDm+K6s6bmUF7wdIX4pb+2RYVzhLmR/9y4WMgo3DEIvjDAEFW4YhCYaRhfqvWHQu3EjC5nK2iLDujl+hh3UHg5kznBOfjjD04fd2W5huXBdHrneDYWivFxAly2Yz+XZyJxRnMCw+pMfRJGRnvzQpg9zIpMDBCY/hI5luri80zX5ofuuHiYyR5NemGbVkZkVcIUtx5yZOysQhll1QmeFwj/LTGl5Mf8SiAxr5iEbGYWJnGGjQ8GJjiITOWXqoNaJnGSozUKGNZEzAchUVJFRni4uMI4papgu3loruOQ0TBf3JlsYBQH/kojMhCoyE0KuRMuxvvEuy/EiEy13dzezME0Ihp8VTmaWmUg+Mqw/DmMho/VP33LenCemHC8y0XLkNmSOxzuk60/fmMgw//QtCcjAH9hyySXlD2yTgMwxNR+PCbqiR44zDAv65HjDryy4kHxkYLEQrvs9SVksJBHITKj4OCHsiqKc6JJEWrwTCb+qoJMCZNK18JlwGDps4bNkIPOa9Ioafa9JuKImJxwGHd4JhV9RMBXIwCKuHFfVkrKIa0KQmZNd23hOyhUlOYnnIql7J6arJrjGyEwHmhO6+Y5kLu2bRe+0eecoXTU5J9KjEF0d3k2L6CoKOjxdxhNnKVv+x15MyDynYUKWfhU5mbNO2TtRXRXBdBQmfFVc3Ens4m1JVz5QkJMIg7p3grpKgilBBn/aQ6I+HkI/l3VlXkFO7hFeEnL/oxD+6wrhTAsy4lE9pPigQFk5yQcFisspPihQOpypQYYkU4GB/pYJ5ceRSsrJPo5UWE71caSy4UwPMrjN8j+ldxZdVXZFSE49hKJyyuGX8y9dyCB0iO9Z4IeQnkerC8jpCKGYnIauk/EvXcjg2+4ndrBd3HFCmyv8clpCKCSno+sk/EsXMnTz1R2Rp0bfjle1usIrpyWEQnJ6uk7YvxQig2vw/rZe9u2f1e4KS+6avhAuBOQ279qzZ9fmMO80dh0znD9OPzLk6uXjW1sd3Pr4RDyuRMvpD2FDzl3WwVscwu+dXt3ocE53BDKkHdu//8GtW/GCKf1btz64f/8xFJsr0XLxhJDI7XYXj9kd4p1e3ehwdg4yjBafK6tW2/cuL1FF20xsuu9EOthByMxHbsbnyplVRmbvanfdpSQjo39lgE6yfdotTE+vF381rfywmgQnzfb7+xqrmq0Pf+MvTJ1ve+rIvn1HTiFABpABW0AGbAEZsAVkwBaQgRACMhBCsAVkwBaQAVtABmwBGbAFZCCEYAvIgK0CMnBDH2xh8gPYQmECW0AGbAEZsAVkIIRgqxkZyzBKtTa2dqnmP9i0UhPCMfJQDdP/qmWiWsn221omICP2lla5jmpjaNo0A6+SHalGBjsWfBWQ0YBMvWy7bwnIADI+I7v8opulbcMYqBIcHAvjUN35X2WKSv1vcRa3vSJV2/n8/V/7GtlBkLFMvNdyK1j5AP5HrUS2qfmAvdZhqO20S+Qze5+KcO46VvOQaXjuYM9LB11kmqNB9qH6MNkm7tTLJiDjImOYDomIjXnBHNjlunNwu03OsOoADS3NMtXnachqpfLMSpaxcE+MYzPSEzb+d61kOSTuplkvW2sehlqpVHM/M/1U2DHkOUbHMjbxnLJAXKgOeMgY5nQjGmRfvTyKiDPYXYtGA5Chfe/gqkI7ubaziv87aT6DT0qbnp5mU2Fyc3dTYSJBnCnbbgXDhQlvk7dC1e3PeKl/bZGxSSape5+K+OY51sgyJAXhjztqrRQmvG+a7DO9fXbpJP1dLx/cWYXC1ChMdRcZ+nA+3P/WuFU98J9ugHBWqbtZZgC/WK7juDcjg39jZGr0WIKM4X0VsQaqax8G+rEIMu6nwo7ZnmPLhalOPnZ92G5CBvtLo+Hts6kxPrA6YMFYJoiM1cglY3bdtA+4aQJXfoIMfdVqhww5nckR9HymnXUgCVmmgYz3qfDIy3MsiAzx3Awg4+2jWYaO7g9shyzjR4YOSGomPp22D9eQ+dcWqps1ikkDGZJxQpFBJo49GdfgQYCDDlbxwYkYy3jIeJ8KO1Z2HQsgg8boUMyHjDc8I/vGcBBsEof1NZaJujk+PjzjOKNjjoMHhdtOOs7M8Cjeef+U45zcRvdMT91vjOP/tz05PHPyEbzfITvG8Stjo+Twcfy/YYySt8AvGOPOKH5pHP9e4xv69LMS79xP1eQYHf4Ozyx7Poq3Do5if8fJ8dPN+2gQxqg7J7eNwuQHuIAOtnCPCWwBGbAFZMAWkAFbQAZCCLaADNgCMmALyIAtIAO2gAzYAjIQQrAFZMAWkAHbNUJmOtAckU2wXYe2kGXAVtD2/wGu7qNg8cN0kgAAAABJRU5ErkJggg==" alt=""></p> <p>第三步：</p> <p><img src="data:image/png;base64,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" alt=""></p> <p>第三步：</p> <p><img src="data:image/png;base64,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" alt=""></p> <p>第四步：</p> <p><img src="data:image/png;base64,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" alt=""></p> <p>根据这些步骤，代码实现如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Vn</span> <span class="token punctuation">{</span>
  <span class="token function">updateChildren</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> newCh<span class="token punctuation">,</span> oldCh</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 新children开始标志</span>
    <span class="token keyword">let</span> newStartIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">// 旧children开始标志</span>
    <span class="token keyword">let</span> oldStartIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">// 新children结束标志</span>
    <span class="token keyword">let</span> newEndIndex <span class="token operator">=</span> newCh<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">// 旧children结束标志</span>
    <span class="token keyword">let</span> oldEndIndex <span class="token operator">=</span> oldCh<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> oldKeyToId<span class="token punctuation">;</span>
    <span class="token keyword">let</span> idxInOld<span class="token punctuation">;</span>
    <span class="token keyword">let</span> newStartVnode <span class="token operator">=</span> newCh<span class="token punctuation">[</span>newStartIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> oldStartVnode <span class="token operator">=</span> oldCh<span class="token punctuation">[</span>oldStartIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> newEndVnode <span class="token operator">=</span> newCh<span class="token punctuation">[</span>newEndIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> oldEndVnode <span class="token operator">=</span> oldCh<span class="token punctuation">[</span>oldEndIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 遍历结束条件</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>newStartIndex <span class="token operator">&lt;=</span> newEndIndex <span class="token operator">&amp;&amp;</span> oldStartIndex <span class="token operator">&lt;=</span> oldEndIndex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 新children开始节点和旧开始节点相同</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_sameVnode</span><span class="token punctuation">(</span>newStartVnode<span class="token punctuation">,</span> oldStartVnode<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">patchVnode</span><span class="token punctuation">(</span>newCh<span class="token punctuation">[</span>newStartIndex<span class="token punctuation">]</span><span class="token punctuation">,</span> oldCh<span class="token punctuation">[</span>oldStartIndex<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        newStartVnode <span class="token operator">=</span> newCh<span class="token punctuation">[</span><span class="token operator">++</span>newStartIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
        oldStartVnode <span class="token operator">=</span> oldCh<span class="token punctuation">[</span><span class="token operator">++</span>oldStartIndex<span class="token punctuation">]</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_sameVnode</span><span class="token punctuation">(</span>newEndVnode<span class="token punctuation">,</span> oldEndVnode<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 新childre结束节点和旧结束节点相同</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">patchVnode</span><span class="token punctuation">(</span>newCh<span class="token punctuation">[</span>newEndIndex<span class="token punctuation">]</span><span class="token punctuation">,</span> oldCh<span class="token punctuation">[</span>oldEndIndex<span class="token punctuation">]</span><span class="token punctuation">)</span>
        oldEndVnode <span class="token operator">=</span> oldCh<span class="token punctuation">[</span><span class="token operator">--</span>oldEndIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
        newEndVnode <span class="token operator">=</span> newCh<span class="token punctuation">[</span><span class="token operator">--</span>newEndIndex<span class="token punctuation">]</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_sameVnode</span><span class="token punctuation">(</span>newEndVnode<span class="token punctuation">,</span> oldStartVnode<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 新childre结束节点和旧开始节点相同</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">patchVnode</span><span class="token punctuation">(</span>newCh<span class="token punctuation">[</span>newEndIndex<span class="token punctuation">]</span><span class="token punctuation">,</span> oldCh<span class="token punctuation">[</span>oldStartIndex<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token comment">// 旧的oldStartVnode移动到尾部</span>
        el<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>oldCh<span class="token punctuation">[</span>oldStartIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>elm<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        oldStartVnode <span class="token operator">=</span> oldCh<span class="token punctuation">[</span><span class="token operator">++</span>oldStartIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
        newEndVnode <span class="token operator">=</span> newCh<span class="token punctuation">[</span><span class="token operator">--</span>newEndIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_sameVnode</span><span class="token punctuation">(</span>newStartVnode<span class="token punctuation">,</span> oldEndVnode<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 新children开始节点和旧结束节点相同</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">patchVnode</span><span class="token punctuation">(</span>newCh<span class="token punctuation">[</span>newStartIndex<span class="token punctuation">]</span><span class="token punctuation">,</span> oldCh<span class="token punctuation">[</span>oldEndIndex<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        el<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>oldCh<span class="token punctuation">[</span>oldEndIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>elm<span class="token punctuation">,</span> oldCh<span class="token punctuation">[</span>oldStartIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>elm<span class="token punctuation">)</span><span class="token punctuation">;</span>
        oldEndVnode <span class="token operator">=</span> oldCh<span class="token punctuation">[</span><span class="token operator">--</span>oldEndIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
        newStartVnode <span class="token operator">=</span> newCh<span class="token punctuation">[</span><span class="token operator">++</span>newStartIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// 都不符合的处理，查找新节点中与对比旧节点相同的vnode</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">findIdxInOld</span><span class="token punctuation">(</span>newStartVnode<span class="token punctuation">,</span> oldCh<span class="token punctuation">,</span> oldStartIdx<span class="token punctuation">,</span> oldEndIdx<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 新节点比旧节点多，批量增加节点</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>oldEndIndex <span class="token operator">&lt;=</span> oldStartIndex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> newStartIndex<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> newEndIndex<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 批量增加节点</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createElm</span><span class="token punctuation">(</span>oldCh<span class="token punctuation">[</span>oldEndIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>elm<span class="token punctuation">,</span> newCh<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">createElm</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> vnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> tag <span class="token operator">=</span> vnode<span class="token punctuation">.</span>tag<span class="token punctuation">;</span>
    <span class="token keyword">const</span> ele <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_setAttrs</span><span class="token punctuation">(</span>ele<span class="token punctuation">,</span> vnode<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> testEle <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ele<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>testEle<span class="token punctuation">)</span>
    el<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>ele<span class="token punctuation">,</span> el<span class="token punctuation">.</span>nextSibling<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 查找匹配值</span>
  <span class="token function">findIdxInOld</span><span class="token punctuation">(</span><span class="token parameter">newStartVnode<span class="token punctuation">,</span> oldCh<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> start<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> end<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> c <span class="token operator">=</span> oldCh<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>util<span class="token punctuation">.</span><span class="token function">isDef</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">sameVnode</span><span class="token punctuation">(</span>newStartVnode<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> i <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br></div></div><h2 id="_8-5-diff算法优化"><a href="#_8-5-diff算法优化" class="header-anchor">#</a> 8.5 diff算法优化</h2> <p>前面有个分支，当四种比较节点都找不到匹配时，会调用<code>findIdxInOld</code>找到旧节点中和新的比较节点一致的节点。节点搜索在数量级较大时是缓慢的。查看<code>Vue</code>的源码，发现它在这一个环节做了优化，也就是我们经常在编写列表时被要求加入的唯一属性<strong>key</strong>，有了这个唯一的标志位，我们可以对旧节点建立简单的字典查询，只要有<code>key</code>值便可以方便的搜索到符合要求的旧节点。修改代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Vn</span> <span class="token punctuation">{</span>
  <span class="token function">updateChildren</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ···
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 都不符合的处理，查找新节点中与对比旧节点相同的vnode</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>oldKeyToId<span class="token punctuation">)</span> oldKeyToId <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createKeyMap</span><span class="token punctuation">(</span>oldCh<span class="token punctuation">,</span> oldStartIndex<span class="token punctuation">,</span> oldEndIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
      idxInOld <span class="token operator">=</span> util<span class="token punctuation">.</span><span class="token function">_isDef</span><span class="token punctuation">(</span>newStartVnode<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">?</span> oldKeyToId<span class="token punctuation">[</span>newStartVnode<span class="token punctuation">.</span>key<span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">findIdxInOld</span><span class="token punctuation">(</span>newStartVnode<span class="token punctuation">,</span> oldCh<span class="token punctuation">,</span> oldStartIndex<span class="token punctuation">,</span> oldEndIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 后续操作</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 建立字典</span>
  <span class="token function">createKeyMap</span><span class="token punctuation">(</span><span class="token parameter">oldCh<span class="token punctuation">,</span> start<span class="token punctuation">,</span> old</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> start<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> old<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>oldCh<span class="token punctuation">.</span>key<span class="token punctuation">)</span> map<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> map<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="_8-6-问题思考"><a href="#_8-6-问题思考" class="header-anchor">#</a> 8.6 问题思考</h2> <p>最后我们思考一个问题，<code>Virtual DOM</code> 的重绘性能真的比单纯的<code>innerHTML</code>要好吗，其实并不是这样的，作者的<a href="https://www.zhihu.com/question/31809713/answer/53544875" target="_blank" rel="noopener noreferrer">解释<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <blockquote><ul><li><code>innerHTML: render html string O(template size) +</code> 重新创建所有 <code>DOM</code> 元素 <code>O(DOM size)</code></li></ul></blockquote> <blockquote><ul><li><code>Virtual DOM: render Virtual DOM + diff O(template size) +</code> 必要的 <code>DOM</code> 更新 <code>O(DOM change)</code></li></ul></blockquote> <blockquote><ul><li><code>Virtual DOM render + diff</code> 显然比渲染 html 字符串要慢，但是！它依然是纯 js 层面的计算，比起后面的 <code>DOM</code> 操作来说，依然便宜了太多。可以看到，<code>innerHTML</code> 的总计算量不管是 <code>js</code> 计算还是 <code>DOM</code>操作都是和整个界面的大小相关，但<code>Virtual DOM</code> 的计算量里面，只有 <code>js</code> 计算和界面大小相关，DOM 操作是和数据的变动量相关的。</li></ul></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/book-docs/vue-depth-analysis/揭秘Vue的事件机制.html" class="prev">
        揭秘Vue的事件机制.md
      </a></span> <span class="next"><a href="/book-docs/vue-depth-analysis/深入响应式系统构建-上.html">
        深入响应式系统构建-上.md
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/book-docs/vue-depth-analysis/assets/js/app.51ae15a7.js" defer></script><script src="/book-docs/vue-depth-analysis/assets/js/2.d669090a.js" defer></script><script src="/book-docs/vue-depth-analysis/assets/js/3.c431a2cd.js" defer></script>
  </body>
</html>
