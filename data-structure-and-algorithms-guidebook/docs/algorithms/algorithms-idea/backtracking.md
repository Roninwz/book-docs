---
nav:
  title: 算法
  order: 2
group:
  title: 算法思想
  order: 5
title: 回溯算法
order: 3
---

# 回溯算法

回溯的处理思想，有点类似枚举搜索。我们枚举所有的解，找到满足期望的解。为了有规律地枚举所有可能的解，避免遗漏和重复，我们把问题求解的过程分为 **多个阶段**。每个阶段，我们都会面对一个岔路口，我们先随意选一条路走，当发现这条路走不通的时候（不符合期望的解），就回退到上一个岔路口，另选一种走法继续走。

经典数学问题：

- 数独
- 八皇后
- 0-1 背包
- 图的着色
- 旅行商问题
- 全排列

## 经典问题

### 八皇后

我们有一个 8x8 的棋盘，希望往里放 8 个棋子（皇后），每个棋子所在的行、列、对角线都不能有另一个棋子。你可以看我画的图，第一幅图是满足条件的一种方法，第二幅图是不满足条件的。八皇后问题就是期望找到所有满足这种要求的放棋子方式。

我们把这个问题划分成 8 个阶段，依次将 8 个棋子放到第一行、第二行、第三行……第八行。在放置的过程中，我们不停地检查当前放法，是否满足要求。如果满足，则跳到下一行继续放置棋子；如果不满足，那就再换一种放法，继续尝试。

回溯算法非常适合用递归代码实现，所以，我把八皇后的算法翻译成代码。我在代码里添加了详细的注释，你可以对比着看下。如果你之前没有接触过八皇后问题，建议你自己用熟悉的编程语言实现一遍，这对你理解回溯思想非常有帮助。

```js
```

### 0-1 背包

- W kg
- n 个物品

递归调用表示不选择当前物品，直接考虑下一个（第 i + 1 个），故 cw 不更新

递归调用表示选择了当前物品，故考虑下一个时，cw 通过入参更新为 cw + items[i]

函数入口的 if 分支表明递归结束条件，并保证 maxW 跟踪所有选择中的最大值

### 正则表达式匹配

---

**参考资料：**

- [带你看回溯算法之美](https://juejin.im/post/6882394656148045838)
